{% load static %}
<!DOCTYPE html>
<html lang="en">
    
    <head>
	<title>Quest home</title>
    {% block style_js %}
    {% endblock %}

   

    <script src="{% static 'quest_extension/admin_home/admin_home_base_js.js' %}"></script>   
    <script src="http://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
    <script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


</head>
    

    <body>

        {% for message in messages %}
        <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
            <span>{{message}}</span>
        </div>
        {% endfor %}

        {% block project_settings %}
        {% endblock %}

        <form method = 'GET' action = '/quest/admin_project_info_page/{{current_admin.admin_ldap}}/{{current_project.id}}'>
            <button type = 'submit'> Project Info</button>
        </form>

    <div class='centered'>
        <h1>{{ current_project.project_name}}</h1>

        <div id = 'edit_name_button'>
                <button onclick="show_update_name();" id = 'edit_name_button'> Edit Name </button>
                </div>
                <div id = 'edit_name_container'>
                <form method = 'POST' action = '/quest/admin_update_project_name/{{current_admin.admin_ldap}}/{{current_project.id}}'> 
                    {% csrf_token %}
                    <input type ='text' name = 'project_name' value = '{{current_project.project_name}}'>
                    <button type = 'submit'> Update Project Name</button>
                </form>
                </div>
    </div>

    <div class='container'>
        <div id='my-text-area'>
            {{ current_project.project_description|safe }} 
         </div>
    </div>
    
    
    <div id = 'edit_description_container'>

            <form method='POST' id = 'test_form' action = "/quest/admin_update_project_description/{{current_admin.admin_ldap}}/{{current_project.id}}">
                    {% csrf_token %}
                    Project Description: 
                    <br>
                    <div id = 'edit-my-text-area'>
                        <textarea id="area1" name="project_description" form = 'test_form'>
                            {{current_project.project_description|safe}}
                        </textarea>
                    </div>
                <br>
                    <input type=submit name="submit" value="Update Project Description" onclick="nicEditors.findEditor('area1').saveContent();">
            </form>
    </div>
    <div id = 'edit_description_button'>
        <br>
        <button onclick="show();" >Edit Description</button>
    </div>
    
    <div class='centered'>
         {% if current_project.project_has_teams %}
        <br>
        <br>
        <p>Progress:<p>
        <br>
        {% for team_data in all_teams_and_points.items %}
        {{ team_data.0 }}: {{team_data.1.0}} / {{team_data.1.1}}
        <!-- team_data.0 = team name -->
        <!-- team_data.1.0 = accumulated points by users on this team -->
        <!-- team.data.1.1 = total possible points that can be earned by this team if everyone has 100% completion -->
        <br>
        <br>
        {% endfor %}
        {% endif %}
     
         



        <p>Welcome Admin to the Quests!</p>
        {% if current_project.project_has_teams %}
        <p> You are on the team ___!!!</p>
        {% endif %}
        <p>You have ___ points!</p>
            
        
        <div class = "wrapper">
            {% block quest_create_form %}
            {% endblock %}
        </div>
        
        {% for quest in quests %}
        

        {% block redirect_to_quest_page %}
        {% endblock %}

        <div id = 'edit_picture_container_{{quest.id}}'>
                <form method='POST' id = 'test_form' action = "/quest/admin_update_quest_picture/{{current_admin.admin_ldap}}/{{quest.id}}">
                        {% csrf_token %}
                        <br>
                        Picture URL: <input type = 'text' name = 'new_picture_url' value = '{{quest.quest_picture_url}}'>
                        <button type = submit > Update Picture</button>
        </form>

        </div>
            <button id = 'edit_picture_button_{{quest.id}}' onclick="show_update_picture('{{quest.id}}');"> Edit Picture</button>
        <br>

        {% endfor %}
        


        <br>
        {% block back %}
        <a href= '/quest/admin_project_page/{{current_admin.admin_ldap}}'>Back to Projects Page</a>
        {% endblock %}

    </div>
    </body>
    
    
</html>
