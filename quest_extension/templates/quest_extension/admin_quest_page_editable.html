{% extends 'quest_extension/admin_quest_page_base.html' %}
{% load static %}





{% block stylesheet_js %}
<link rel= "stylesheet" type="text/css" href="{% static 'quest_extension/admin_quest_page/admin_quest_page_editable_style.css' %}">
<script> function show(){
        document.getElementById("video_form").style.display = "inline";
        document.getElementById("add_new_video").style.display = "none"
      } 
      function show_update_name(){
        document.getElementById("edit_name_container").style.display = "inline";
        document.getElementById("edit_name_button").style.display = "none"
      }

       function show_edit_description(){
            document.getElementById("edit_description_container").style.display = "inline";
            document.getElementById("edit_description_button").style.display = "none";
            document.getElementById("my-text-area").style.display = "none";
          } 

      </script>
      <script src="http://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
      <script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script>
      
{% endblock %}

{% block admin_quest_settings %}
<form method='GET' action ='/quest/admin_quest_settings_editable/{{current_admin.admin_ldap}}/{{current_quest.id}}'> 
    {% csrf_token %}
    <button type='submit'> Quest Settings </button>
</form>
{% endblock %}


{% block edit_name %}
<div id = 'edit_name_button'>
<button onclick="show_update_name();" id = 'edit_name_button'> Edit Name </button>
</div>
<div id = 'edit_name_container'>
<form method = 'POST' action = '/quest/admin_update_quest_name/{{current_admin.admin_ldap}}/{{current_quest.id}}'> 
    {% csrf_token %}
    <input type ='text' name = 'quest_name'>
    <button type = 'submit'> Update Quest Name</button>
</form>
</div>
{% endblock %}

{% block forms_and_undo %}
    <form id = 'free_response' action='/quest/fr-create-form/{{current_admin.admin_ldap}}/{{current_quest.id}}' method = 'GET'></form>
    <form id = 'multiple_choice' action='/quest/mc-create-form/{{current_admin.admin_ldap}}/{{current_quest.id}}' method = 'GET'></form>
    <form id = 'undo_delete' method = 'POST' action = '/quest/undo_delete_question/{{current_admin.admin_ldap}}/{{current_quest.id}}'> {% csrf_token %} </form>
{% endblock %}



{% block delete_video_buttons %}
<form method='POST' action = '/quest/delete_video/{{current_admin.admin_ldap}}/{{current_quest.id}}'>
    {% csrf_token %}
    <button type='submit' 
        name = delete 
        value = {{video.id}} 
        onclick="return confirm('Are you sure you want to delete this video');">
        Delete Video
    </button>
</form>
{% endblock %}

{% block edit_description %}
<div id = 'edit_description_container'>

        <form method='POST' id = 'edit_description_form' action = "/quest/admin_update_quest_description/{{current_admin.admin_ldap}}/{{current_quest.id}}">
                {% csrf_token %}
                Quest Description: 
                <br>
                <div id = 'edit-my-text-area'>
                    <textarea id="area1" name="quest_description" form = 'edit_description_form'>
                        {{current_quest.quest_description}}
                    </textarea>
                </div>
            <br>
                <input type=submit name="submit" value="Update Quest Description" onclick="nicEditors.findEditor('area1').saveContent();">
        </form>
        <br>
</div>
<div id = 'edit_description_button'>
    <br>
    <button onclick="show_edit_description();">Edit Description</button>
    <br>
    <br>
</div>

{% endblock %}

{% block fr_mc_undo_delete_video %}
    <div id = 'add_new_video'>
        <button onclick="show();">Include Video</button>
    </div>

    <br>

    
    <div id = 'video_form'>
        <form method='POST' action= '/quest/save_video/{{current_admin.admin_ldap}}/{{current_quest.id}}'>
            {% csrf_token %}
            {{ video_form }}
            <br>
            <br>
            <button type = submit>Upload Video</button>
        </form>
    </div>


    <div class= 'admin_buttons'>
        <h3>Choose what kind of question you want to make!</h3>
        <button form = 'free_response' type = submit>Free Response</button>
        <button form = 'multiple_choice' type = submit>Multiple Choice</button>
        <br>
        <br>
        <button form = 'undo_delete' type = submit name='undo' value='current_quest.id'> Undo Delete</button>
    </div>
{% endblock %}


{% block edit_deletequestion %}
    <div class= 'admin_buttons'>

        {% if question.question_type == 'FR' %}
        <form method= 'GET', action= '/quest/admin_edit_fr_question/{{current_admin.admin_ldap}}/{{ question.id }}'>
                {% csrf_token %}
                <button type='submit' name = 'edit' value = '{{question.id}}'>Edit</button>
        </form>
        {% endif %}

        {% if question.question_type == 'MC' %}
        <form method= 'GET', action= '/quest/admin_edit_mc_question/{{current_admin.admin_ldap}}/{{ question.id }}'>
                {% csrf_token %}
                <button type='submit' name = 'edit' value = '{{question.id}}'>Edit</button>
        </form>
        {% endif %}

        <form method= 'POST' action= '/quest/delete_question/{{current_admin.admin_ldap}}/{{current_quest.id}}'>
                {% csrf_token %}
                <button type='submit' name = 'deleted' value = '{{question.id}}'>Delete Question</button>
        </form>
    </div>
{% endblock %}

{% block home %}
    <form id='home' action = '/quest/admin_home_editable/{{current_admin.admin_ldap}}/{{current_project_id}}' method='GET'></form>
    <button form = 'home' type = submit>Home</button>
{% endblock %}